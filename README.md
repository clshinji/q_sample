# Amazon Q Developer CLI ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒª

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€Amazon Q Developer CLI ã¨ Model Context Protocol (MCP) ã‚’è©¦ã™ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

## æ¦‚è¦

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ Amazon Q Developer CLI ã‚’ä½¿ã£ã¦ã€ MCP ã‚’åˆ©ç”¨ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚


## mcp-jr-east-delay 

JRæ±æ—¥æœ¬ã®åˆ—è»Šé…å»¶æƒ…å ±ã‚’å–å¾—ã™ã‚‹MCPã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

- **mcp-jr-east-delay**: JRæ±æ—¥æœ¬ã®åˆ—è»Šé…å»¶æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®Model Context Protocol (MCP) ã‚µãƒ¼ãƒãƒ¼ [GitHub: tinjyuu/mcp-jr-east-delay](https://github.com/tinjyuu/mcp-jr-east-delay/tree/main)

```bash
git clone https://github.com/tinjyuu/mcp-jr-east-delay.git
```

### ä¸»ãªæ©Ÿèƒ½

- JRæ±æ—¥æœ¬ã®åˆ—è»Šé…å»¶æƒ…å ±ã®å–å¾—
- MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ãŸã‚µãƒ¼ãƒãƒ¼å®Ÿè£…
- Amazon Q Developerã¨ã®é€£æº

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ä½¿ç”¨æ–¹æ³•

è©³ç´°ãªè¨­å®šã¨ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[mcp-jr-east-delayã®README](https://github.com/tinjyuu/mcp-jr-east-delay/blob/main/README.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ãŸã ã—ã€ Description ã®è¿½è¨˜ãŒå¿…è¦ãªç®‡æ‰€ãŒã‚ã‚‹ãŸã‚ã€å…ƒã®ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰ã‚’è‰¯ãç¢ºèªã—ã¦åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚ï¼ˆ2025/5/8æ™‚ç‚¹ã®ã‚³ãƒ¼ãƒ‰ã¯ä¿®æ­£ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚ï¼‰

```JavaScript
--- index.ts.orig       2025-05-08 16:12:45
+++ index.ts    2025-04-30 16:09:26
@@ -68,6 +68,7 @@
   // Tool: getDelays
   server.tool(
     "getDelays",
+    "Gets train delay information for JR East railway lines in the specified area",
     {
       area: z.enum(["kanto", "tohoku", "shinetsu", "shinkansen"]).optional(),
     },
@@ -109,3 +110,4 @@
 }
 
 await main(); 
+
```

## ç’°å¢ƒæ§‹ç¯‰

- Devcontainer ã§ç’°å¢ƒæ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ï¼ˆNode.js, npm, Python, AWS CLIï¼‰
- Amazon Q Developer CLI (ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/setup-dev-cli.html)ã‚’å‚ç…§)
- Amazon Q Developer CLI ã¯ Mac ã®ç’°å¢ƒã‚’æƒ³å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã« Builders ID ã§ã®èªè¨¼ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã®ã§ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®è¡¨ç¤ºã«å¾“ã£ã¦æ“ä½œã—ã¦ãã ã•ã„ã€‚

### WSL ã§ã®ç’°å¢ƒæ§‹ç¯‰

Ubuntu ã®ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ç”¨ã« Amazon Q ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

```
wget https://desktop-release.q.us-east-1.amazonaws.com/latest/amazon-q.deb
```

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
sudo apt-get install -f
sudo dpkg -i amazon-q.deb
```

Amazon Q ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

```
q login
```

Builder ID ã¾ãŸã¯ IAM ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚»ãƒ³ã‚¿ãƒ¼ã§ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†è€…ã‹ã‚‰æä¾›ã•ã‚ŒãŸé–‹å§‹ URL ã‚’ä½¿ç”¨ã—ã¦èªè¨¼ã‚’è¡Œã„ã¾ã™ã€‚

## åˆ©ç”¨æ–¹æ³•

åˆ©ç”¨ã—ãŸã„ MCP ã‚µãƒ¼ãƒ ã¯ `.amazonq/mcp.json` ã¾ãŸã¯ `~/.aws/amazonq/mcp.json` ã«è¨˜è¼‰ã—ã¾ã™ã€‚
è¨˜è¼‰ä¾‹ã¯ä»¥ä¸‹ã‚’å‚è€ƒã«ã©ã†ãžã€‚

```json
{
  "mcpServers": {
    "jr-east-delay": {
      "command": "node",
      "args": ["ã“ã‚“ãªæ„Ÿã˜ã®ãƒ•ãƒ«ãƒ‘ã‚¹ã‚’å…¥åŠ›/mcp-jr-east-delay/build/index.js"],
      "description": "JRæ±æ—¥æœ¬ã®é…å»¶æƒ…å ±ã‚’å–å¾—ã™ã‚‹MCPã‚µãƒ¼ãƒãƒ¼"
    }
  }
}
```

MCP ã‚µãƒ¼ãƒãƒ¼ã‚’ åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ èµ·å‹•ã—ã¦ãŠãã¾ã™ã€‚

```bash
# mcp-jr-east-delay ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œã™ã‚‹å ´åˆ
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã¯ä½•ã‚‚å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“ãŒã€æ­£å¸¸å‹•ä½œã§ã™
node build/index.js
```

Amazon Q Developer CLI ã¯ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã§èµ·å‹•ã§ãã¾ã™ã€‚

```bash
q chat
```

ã†ã¾ãèµ·å‹•ã—ãŸå ´åˆã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚ Amazon Q ã¯ AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãªã£ã¦ã„ã‚‹ã®ã§ã€é€”ä¸­ã§ MCP ã‚µãƒ¼ãƒãƒ¼ã«å•ã„åˆã‚ã›ã¦è‰¯ã„ã‹ç¢ºèªã•ã‚Œã¦ã„ã¾ã™ã€‚ï¼ˆã“ã“ã§ã¯ y ã¨å…¥åŠ›ã—ã¦è¨±å¯ã—ã¦ã„ã‚‹ã€‚ï¼‰

```bash
k-nagayama@LAPTOP-AC8RCM05:/mnt/c/code/q_sample$ q chat
To learn more about MCP safety, see https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/command-line-mcp-security.html
âœ“ jr_east_delay loaded in 8.64 s
âœ“ 1 of 1 mcp servers initialized

Welcome to 

 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–„â–„ â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•     â•šâ•â•â–€â–€â•â• 
                                                        


â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Did you know? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                 â”‚
â”‚      You can execute bash commands by typing ! followed by      â”‚
â”‚                           the command                           â”‚
â”‚                                                                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


/help all commands  â€¢  ctrl + j new lines  â€¢  ctrl + k fuzzy search
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
>  æ–°å®¿ã‹ã‚‰æ±äº¬ã¾ã§è¡ŒããŸã„ã‚“ã ã‘ã©ã€JRã®é‹è¡ŒçŠ¶æ³ã£ã¦ã©ã†ã‹ãªï¼Ÿ

JRæ±æ—¥æœ¬ã®é‹è¡ŒçŠ¶æ³ã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã­ã€‚é–¢æ±ã‚¨ãƒªã‚¢ã®é…å»¶æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚


ðŸ› ï¸  Using tool: getDelays from mcp server jr_east_delay
 â‹® 
 â— Running getDelays with the param:
 â‹®  {
 â‹®    "arguments": {
 â‹®      "area": "kanto"
 â‹®    },
 â‹®    "name": "getDelays"
 â‹®  }
Allow this action? Use 't' to trust (always allow) this tool for the session. [y/n/t]:

> y

 â‹® 
 â— Completed in 0.520s


ç¾åœ¨ã®JRæ±æ—¥æœ¬ã®é–¢æ±ã‚¨ãƒªã‚¢ã®é‹è¡ŒçŠ¶æ³ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚æ–°å®¿ã‹ã‚‰æ±äº¬é–“ã®å±±æ‰‹ç·šã‚„ä¸­å¤®ç·šãªã©ã«ã¤ã„ã¦ã¯ç‰¹ã«é…å»¶ã‚„é‹è»¢è¦‹åˆã‚ã›ã®æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ä»¥ä¸‹ã®è·¯ç·šã§é…å»¶ã‚„é‹ä¼‘ã®æƒ…å ±ãŒã‚ã‚Šã¾ã™ï¼š

1. ä¸Šè¶Šç·šï¼šè¶Šå¾Œå €ä¹‹å†…ï½žå°å‡ºé§…é–“ã§ã®æ²¿ç·šç«ç½ã®å½±éŸ¿ã§ã€é•·å²¡ï½žå°å‡ºé§…é–“ã®é‹è»¢ã‚’è¦‹åˆã‚ã›ã¦ã„ã¾ã—ãŸãŒã€13æ™‚28åˆ†é ƒã«é‹è»¢ã‚’å†é–‹ã—ã¾ã—ãŸã€‚é•·å²¡ï½žè¶Šå¾Œ
æ¹¯æ²¢é§…é–“ã®ä¸€éƒ¨åˆ—è»Šã«é…ã‚ŒãŒå‡ºã¦ã„ã¾ã™ã€‚

2. å†…æˆ¿ç·šï¼šä¿å®ˆå·¥äº‹ã®ãŸã‚ã€5æœˆ13æ—¥(ç«)ã€14æ—¥(æ°´)ã€15æ—¥(æœ¨)ã®å„æ—¥10æ™‚30åˆ†ã‹ã‚‰14æ™‚40åˆ†é ƒã¾ã§ã€é¤¨å±±ï½žå®‰æˆ¿é´¨å·é§…é–“ã®ä¸Šä¸‹ç·šã§ä¸€éƒ¨åˆ—è»ŠãŒé‹ä¼‘ã—ã¾
ã™ã€‚

æ–°å®¿ã‹ã‚‰æ±äº¬ã¾ã§ã®åŒºé–“ã«ã¤ã„ã¦ã¯ç¾åœ¨ç‰¹ã«å•é¡Œã¯ãªã„ã‚ˆã†ã§ã™ã®ã§ã€é€šå¸¸é€šã‚Šé›»è»Šã‚’åˆ©ç”¨ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

> /quit
k-nagayama@LAPTOP-AC8RCM05:/mnt/c/code/q_sample$ 
```
